#!/usr/bin/env bash

if [[ $TRAVIS_OS_NAME = 'osx' ]]; then
  brew install bash bats-core
  echo '/usr/local/bin/bash' | sudo tee -a /etc/shells
  pam_setting="auth       sufficient   pam_wheel.so trust group=chsh\n/"
  pam_file="/etc/pam.d/chsh"
  echo "$pam_setting" | cat - "$pam_file" > temp && sudo mv temp "$pam_file"
  sudo usermod -a -G chsh "$USER"
  chsh -s /usr/local/bin/bash
else
  sudo apt-get install npm -y
  sudo npm install -g bats
fi
